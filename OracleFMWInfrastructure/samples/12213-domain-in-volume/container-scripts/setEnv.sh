#!/bin/bash
#
#Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.
#
#Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.


ENV_ARG=''
if [ "$#" -eq  "0" ]
   then
    echo "A properties file with variable definitions should be supplied."
    exit 1
 else
    PROPERTIES_FILE=$1
    echo Export environment variables from the ${PROPERTIES_FILE} properties file
 fi

CUSTOM_DOMAIN_NAME=`awk '{print $1}' $PROPERTIES_FILE | grep ^DOMAIN_NAME= | cut -d "=" -f2`
if [ -n "$CUSTOM_DOMAIN_NAME" ]; then
     export CUSTOM_DOMAIN_NAME=$CUSTOM_DOMAIN_NAME
     echo CUSTOM_DOMAIN_NAME=$CUSTOM_DOMAIN_NAME
     ENV_ARG="$ENV_ARG -e CUSTOM_DOMAIN_NAME=$CUSTOM_DOMAIN_NAME"
fi

CUSTOM_ADMIN_NAME=`awk '{print $1}' $PROPERTIES_FILE | grep ^ADMIN_NAME= | cut -d "=" -f2`
if [ -n "$CUSTOM_ADMIN_NAME" ]; then
     export CUSTOM_ADMIN_NAME=$CUSTOM_ADMIN_NAME
     echo CUSTOM_ADMIN_NAME=$CUSTOM_ADMIN_NAME
     ENV_ARG="$ENV_ARG -e CUSTOM_ADMIN_NAME=$CUSTOM_ADMIN_NAME"
fi

CUSTOM_ADMIN_HOST=`awk '{print $1}' $PROPERTIES_FILE | grep ^ADMIN_HOST= | cut -d "=" -f2`
if [ -n "$CUSTOM_ADMIN_HOST" ]; then
    export CUSTOM_ADMIN_HOST=$CUSTOM_ADMIN_HOST
    echo CUSTOM_ADMIN_HOST=$CUSTOM_ADMIN_HOST
    ENV_ARG="$ENV_ARG -e CUSTOM_ADMIN_HOST=$CUSTOM_ADMIN_HOST"
fi

CUSTOM_ADMIN_LISTEN_PORT=`awk '{print $1}' $PROPERTIES_FILE | grep ^ADMIN_LISTEN_PORT= | cut -d "=" -f2`
if [ -n "$CUSTOM_ADMIN_LISTEN_PORT" ]; then
    export CUSTOM_ADMIN_LISTEN_PORT=$CUSTOM_ADMIN_LISTEN_PORT
    echo CUSTOM_ADMIN_LISTEN_PORT=$CUSTOM_ADMIN_LISTEN_PORT
    ENV_ARG="$ENV_ARG -e CUSTOM_ADMIN_LISTEN_PORT=$CUSTOM_ADMIN_LISTEN_PORT"
fi

CUSTOM_MANAGEDSERVER_PORT=`awk '{print $1}' $PROPERTIES_FILE | grep ^MANAGEDSERVER_PORT= | cut -d "=" -f2`
if [ -n "$CUSTOM_MANAGEDSERVER_PORT" ]; then
    export CUSTOM_MANAGEDSERVER_PORT=$CUSTOM_MANAGEDSERVER_PORT
    echo CUSTOM_MANAGEDSERVER_PORT=$CUSTOM_MANAGEDSERVER_PORT
    ENV_ARG="$ENV_ARG -e CUSTOM_MANAGEDSERVER_PORT=$CUSTOM_MANAGEDSERVER_PORT"
fi

CUSTOM_MANAGED_BASE_NAME=`awk '{print $1}' $PROPERTIES_FILE | grep ^MANAGED_BASE_NAME= | cut -d "=" -f2`
if [ -n "$CUSTOM_MANAGED_BASE_NAME" ]; then
    export CUSTOM_MANAGED_BASE_NAME=$CUSTOM_MANAGED_BASE_NAME
    echo CUSTOM_MANAGED_BASE_NAME=$CUSTOM_MANAGED_BASE_NAME
    ENV_ARG="$ENV_ARG -e CUSTOM_MANAGED_BASE_NAME=$CUSTOM_MANAGED_BASE_NAME"
fi

CUSTOM_MANAGED_SERVER_COUNT=`awk '{print $1}' $PROPERTIES_FILE | grep ^MANAGED_SERVER_COUNT= | cut -d "=" -f2`
if [ -n "$CUSTOM_MANAGED_SERVER_COUNT" ]; then
    export CUSTOM_MANAGED_SERVER_COUNT=$CUSTOM_MANAGED_SERVER_COUNT
    echo CUSTOM_MANAGED_SERVER_COUNT=$CUSTOM_MANAGED_SERVER_COUNT
    ENV_ARG="$ENV_ARG -e CUSTOM_MANAGED_SERVER_COUNT=$CUSTOM_MANAGED_SERVER_COUNT"
fi

CUSTOM_CLUSTER_NAME=`awk '{print $1}' $PROPERTIES_FILE | grep ^CLUSTER_NAME= | cut -d "=" -f2`
if [ -n "$CUSTOM_CLUSTER_NAME" ]; then
    export CUSTOM_CLUSTER_NAME=$CUSTOM_CLUSTER_NAME
    echo CUSTOM_CLUSTER_NAME=$CUSTOM_CLUSTER_NAME
    ENV_ARG="$ENV_ARG -e CUSTOM_CLUSTER_NAME=$CUSTOM_CLUSTER_NAME"
fi


CUSTOM_RCUPREFIX=`awk '{print $1}' $PROPERTIES_FILE | grep ^RCUPREFIX= | cut -d "=" -f2`
if [ -n "$CUSTOM_RCUPREFIX" ]; then
    export CUSTOM_RCUPREFIX=$CUSTOM_RCUPREFIX
    echo CUSTOM_RCUPREFIX=$CUSTOM_RCUPREFIX
    ENV_ARG="$ENV_ARG -e CUSTOM_RCUPREFIX=$CUSTOM_RCUPREFIX"
fi

CUSTOM_PRODUCTION_MODE=`awk '{print $1}' $PROPERTIES_FILE | grep ^PRODUCTION_MODE= | cut -d "=" -f2`
if [ -n "$CUSTOM_PRODUCTION_MODE" ]; then
    export CUSTOM_PRODUCTION_MODE=$CUSTOM_PRODUCTION_MODE
    echo CUSTOM_PRODUCTION_MODE=$CUSTOM_PRODUCTION_MODE
    ENV_ARG="$ENV_ARG -e CUSTOM_PRODUCTION_MODE=$CUSTOM_PRODUCTION_MODE"
fi
CUSTOM_DEBUG_PORT=`awk '{print $1}' $PROPERTIES_FILE | grep ^DEBUG_PORT= | cut -d "=" -f2`
if [ -n "$CUSTOM_DEBUG_PORT" ]; then
    export CUSTOM_DEBUG_PORT=$CUSTOM_DEBUG_PORT
    echo CUSTOM_DEBUG_PORT=$CUSTOM_DEBUG_PORT
    ENV_ARG="$ENV_ARG -e CUSTOM_DEBUG_PORT=$CUSTOM_DEBUG_PORT"
fi

CUSTOM_DEBUG_FLAG=`awk '{print $1}' $PROPERTIES_FILE | grep ^DEBUG_FLAG= | cut -d "=" -f2`
if [ -n "$CUSTOM_DEBUG_FLAG" ]; then
    export CUSTOM_DEBUG_FLAG=$CUSTOM_DEBUG_FLAG
    echo CUSTOM_DEBUG_FLAG=$CUSTOM_DEBUG_FLAG
    ENV_ARG="$ENV_ARG -e CUSTOM_DEBUG_FLAG=$CUSTOM_DEBUG_FLAG"
fi

CUSTOM_JAVA_OPTIONS=`awk '{print $1}' $PROPERTIES_FILE | grep ^JAVA_OPTIONS= | cut -d "=" -f2`
if [ -n "$CUSTOM_JAVA_OPTIONS" ]; then
    export CUSTOM_JAVA_OPTIONS=$CUSTOM_JAVA_OPTIONS
    echo JAVA_OPTIONS=$CUSTOM_JAVA_OPTIONS
    ENV_ARG="$ENV_ARG -e CUSTOM_JAVA_OPTIONS=$CUSTOM_JAVA_OPTIONS"
fi

export ENV_ARG=$ENV_ARG
echo ENV_ARG=$ENV_ARG

